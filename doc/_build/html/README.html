

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Authentic2 - Versatile Identity Server &mdash; Authentic2 1.9.2 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.9.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Authentic2 1.9.2 documentation" href="index.html" />
    <link rel="prev" title="Welcome to Authentic2’s documentation!" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="index.html" title="Welcome to Authentic2’s documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Authentic2 1.9.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="authentic2-versatile-identity-server">
<span id="readme"></span><h1>Authentic2 - Versatile Identity Server<a class="headerlink" href="#authentic2-versatile-identity-server" title="Permalink to this headline">¶</a></h1>
<p>Authentic2 is a versatile identity provider aiming to address a broad
range of needs, from simple to complex setups; it has support for many
protocols and can bridge between them.</p>
<p>Authentic2 is under the GNU AGPL version 3 licence.</p>
<p>It has support for SAMLv2 thanks to Lasso, a free (GNU GPL)
implementation of the Liberty Alliance specifications.</p>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<p>Authentic can authenticate users against:
- an LDAP directory,
- a SAML 2.0 identity provider,
- an OpenID identity provider,
- with an X509 certificate.</p>
<p>Authentic can provide authentication to web applications using the following
protocols:
- OpenID,
- SAML 2.0,
- CAS 1.0 &amp; CAS 2.0.</p>
<p>Authentic can proxy authentication between any two different protocols it
support.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h3>
<p>You must install the following packages to use Authentic</p>
<ul>
<li><p class="first">Python Lasso binding 2.3.5:</p>
<blockquote>
<div><p>From sources: <a class="reference external" href="http://lasso.entrouvert.org/download">http://lasso.entrouvert.org/download</a>
Debian based distribution: apt-get install python-lasso</p>
</div></blockquote>
</li>
<li><p class="first">Django 1.3:</p>
<blockquote>
<div><p>From sources: <a class="reference external" href="http://www.djangoproject.com/download/1.3/tarball/">http://www.djangoproject.com/download/1.3/tarball/</a></p>
</div></blockquote>
</li>
<li><p class="first">Django-registration 0.8-alpha-1:</p>
<blockquote>
<div><p>From sources: <a class="reference external" href="http://bitbucket.org/ubernostrum/django-registration/downloads">http://bitbucket.org/ubernostrum/django-registration/downloads</a>
Debian based distribution: apt-get install python-django-registration</p>
</div></blockquote>
</li>
<li><p class="first">Django-authopenid 0.9.6:</p>
<blockquote>
<div><p>From sources: <a class="reference external" href="http://bitbucket.org/benoitc/django-authopenid/downloads">http://bitbucket.org/benoitc/django-authopenid/downloads</a></p>
</div></blockquote>
</li>
<li><p class="first">Django-south 0.7.3:</p>
<blockquote>
<div><p>From sources:: <a class="reference external" href="http://south.aeracode.org/docs/installation.html">http://south.aeracode.org/docs/installation.html</a></p>
</div></blockquote>
</li>
<li><p class="first">Django-profiles 0.2:</p>
<blockquote>
<div><p>From sources:: <a class="reference external" href="http://pypi.python.org/pypi/django-profiles">http://pypi.python.org/pypi/django-profiles</a></p>
</div></blockquote>
</li>
</ul>
<p>You install all the django libraries quickly using pip:</p>
<div class="highlight-python"><pre>pip install django django-profiles django-registration \
            django-debug-toolbar django-authopenid south</pre>
</div>
<p>or easy_install:</p>
<div class="highlight-python"><pre>easy_install django django-profiles django-registration \
             django-debug-toolbar django-authopenid south</pre>
</div>
</div>
<div class="section" id="quick-start">
<h3>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h3>
<p>Then launch the following commands:</p>
<div class="highlight-python"><pre>python manage.py syncdb --migrate
python manage.py runserver</pre>
</div>
<p>You should see the following output:</p>
<div class="highlight-python"><pre>Validating models...
0 errors found

Django version 1.2, using settings 'authentic.settings'
Development server is running at http://127.0.0.1:8000/
Quit the server with CONTROL-C.

You can access the running application on http://127.0.0.1:8000/</pre>
</div>
</div>
<div class="section" id="specifying-a-different-database">
<h3>Specifying a different database<a class="headerlink" href="#specifying-a-different-database" title="Permalink to this headline">¶</a></h3>
<p>This is done by modifying the DATABASES dictionary in your local_settings.py file
(create it in Authentic project directory); for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">DATABASES</span><span class="p">[</span><span class="s">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s">&#39;django.db.backends.postgresql&#39;</span><span class="p">,</span>
  <span class="s">&#39;NAME&#39;</span><span class="p">:</span> <span class="s">&#39;authentic&#39;</span><span class="p">,</span>
  <span class="s">&#39;USER&#39;</span><span class="p">:</span> <span class="s">&#39;admindb&#39;</span><span class="p">,</span>
  <span class="s">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s">&#39;foobar&#39;</span><span class="p">,</span>
  <span class="s">&#39;HOST&#39;</span><span class="p">:</span> <span class="s">&#39;db.example.com&#39;</span><span class="p">,</span>
  <span class="s">&#39;PORT&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="c"># empty string means default value</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You should refer to the Django documentation on databases settings at
<a class="reference external" href="http://docs.djangoproject.com/en/dev/ref/settings/#databases">http://docs.djangoproject.com/en/dev/ref/settings/#databases</a> for all
the details.</p>
</div>
<div class="section" id="how-to-upgrade-to-a-new-version-of-authentic">
<h3>How to upgrade to a new version of authentic ?<a class="headerlink" href="#how-to-upgrade-to-a-new-version-of-authentic" title="Permalink to this headline">¶</a></h3>
<p>Authentic store all its data in a relational database as specified in its
settings.py or local_settings.py file. So in order to upgrade to a new version
of authentic you have to update your database schema using the
migration command — you will need to have installed the dependency django-south,
see the beginning of this README file.:</p>
<div class="highlight-python"><pre>python ./manage.py migrate</pre>
</div>
<p>Then you will need to create new tables if there are.:</p>
<div class="highlight-python"><pre>python ./manage.py syncdb</pre>
</div>
</div>
</div>
<div class="section" id="using-authentic-with-an-ldap-directory">
<h2>Using Authentic with an LDAP directory<a class="headerlink" href="#using-authentic-with-an-ldap-directory" title="Permalink to this headline">¶</a></h2>
<p>Authentic use the module django_auth_ldap to synchronize the Django user tables
with an LDAP. For complex use case, we will refer you to the django_auth_ldap
documentation, see <a class="reference external" href="http://packages.python.org/django-auth-ldap/">http://packages.python.org/django-auth-ldap/</a>.</p>
<div class="section" id="how-to-authenticate-users-against-an-ldap-server-with-anonymous-binding">
<h3>How to authenticate users against an LDAP server with anonymous binding ?<a class="headerlink" href="#how-to-authenticate-users-against-an-ldap-server-with-anonymous-binding" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Install the django_auth_ldap module for Django:</p>
<div class="highlight-python"><pre>pip install django_auth_ldap</pre>
</div>
</li>
<li><p class="first">Configure your local_settings.py file for authenticating against LDAP.</p>
</li>
</ol>
<p>The next lines must be added:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">AUTHENTICATION_BACKENDS</span> <span class="o">+=</span> <span class="p">(</span> <span class="s">&#39;django_auth_ldap.backend.LDAPBackend&#39;</span><span class="p">,</span> <span class="p">)</span>

<span class="kn">import</span> <span class="nn">ldap</span>
<span class="kn">from</span> <span class="nn">django_auth_ldap.config</span> <span class="kn">import</span> <span class="n">LDAPSearch</span>

<span class="c"># Here put the LDAP URL of your server</span>
<span class="n">AUTH_LDAP_SERVER_URI</span> <span class="o">=</span> <span class="s">&#39;ldap://ldap.example.com&#39;</span>
<span class="c"># Let the bind DN and bind password blank for anonymous binding</span>
<span class="n">AUTH_LDAP_BIND_DN</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
<span class="n">AUTH_LDAP_BIND_PASSWORD</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
<span class="c"># Lookup user under the branch o=base and by mathcing their uid against the</span>
<span class="c"># received login name</span>
<span class="n">AUTH_LDAP_USER_SEARCH</span> <span class="o">=</span> <span class="n">LDAPSearch</span><span class="p">(</span><span class="s">&quot;o=base&quot;</span><span class="p">,</span>
    <span class="n">ldap</span><span class="o">.</span><span class="n">SCOPE_SUBTREE</span><span class="p">,</span> <span class="s">&quot;(uid=</span><span class="si">%(user)s</span><span class="s">)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="how-to-allow-members-of-an-ldap-group-to-manage-authentic">
<h3>How to allow members of an LDAP group to manage Authentic ?<a class="headerlink" href="#how-to-allow-members-of-an-ldap-group-to-manage-authentic" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">First you must know the objectClass of groups in your LDAP schema, this FAQ
will show you the configuration for two usual classes: groupOfNames and
groupOfUniqueNames.</p>
</li>
<li><p class="first">Find the relevant groupname. We will say it is: cn=admin,o=mycompany</p>
</li>
<li><p class="first">Add the following lines:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django_auth_ldap.config</span> <span class="kn">import</span> <span class="n">GroupOfNamesType</span>
<span class="n">AUTH_LDAP_GROUP_TYPE</span> <span class="o">=</span> <span class="n">GroupOfNamesType</span><span class="p">()</span>
<span class="n">AUTH_LDAP_GROUP_SEARCH</span> <span class="o">=</span> <span class="n">LDAPSearch</span><span class="p">(</span><span class="s">&quot;o=mycompany&quot;</span><span class="p">,</span>
    <span class="n">ldap</span><span class="o">.</span><span class="n">SCOPE_SUBTREE</span><span class="p">,</span> <span class="s">&quot;(objectClass=groupOfNames)&quot;</span><span class="p">)</span>
<span class="n">AUTH_LDAP_USER_FLAGS_BY_GROUP</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&quot;is_staff&quot;</span><span class="p">:</span> <span class="s">&quot;cn=admin,o=mycompany&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ol>
<p>For an objectClass of groupOfUniqueNames you would change the string
GroupOfNamesType to GroupOfUniqueNamesType and grouOfNames to
groupOfUniqueNames. For more complex cases see the django_auth_ldap
documentation.</p>
</div>
</div>
<div class="section" id="saml-2-0">
<h2>SAML 2.0<a class="headerlink" href="#saml-2-0" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-to-i-authenticate-against-authentic2-with-a-samlv2-service-provider">
<h3>How to I authenticate against Authentic2 with a SAMLv2 service provider ?<a class="headerlink" href="#how-to-i-authenticate-against-authentic2-with-a-samlv2-service-provider" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Grab the SAML2 IdP metadata:</p>
<blockquote>
<div><p>http[s]://your.domain.com/idp/saml2/metadata</p>
</div></blockquote>
</li>
<li><p class="first">And configure your service provider with it.</p>
</li>
</ol>
<p>Go to the providers admin panel on:</p>
<blockquote>
<div>http[s]://your.domain.com/admin/saml/libertyprovider/add/</div></blockquote>
<p>There create a new provider using the service provider metadata and enable it
as a service provider, you can customize some behaviours like the preferred
assertion consumer or encryption for the NameID or the Assertion element.</p>
</div>
</div>
<div class="section" id="cas">
<h2>CAS<a class="headerlink" href="#cas" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-to-use-authentic2-as-a-cas-1-0-or-cas-2-0-identity-provider">
<h3>How to use Authentic2 as a CAS 1.0 or CAS 2.0 identity provider ?<a class="headerlink" href="#how-to-use-authentic2-as-a-cas-1-0-or-cas-2-0-identity-provider" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Activate CAS IdP support in settings.py:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">IDP_CAS</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
</li>
<li><p class="first">Then create the database table to hold CAS service tickets:</p>
<div class="highlight-python"><pre>python authentic2/manage.py syncdb --migrate</pre>
</div>
</li>
<li><p class="first">Also configure authentic2 to authenticate against your LDAP directory (see
above) if your want your user attributes to be accessible from your service,
if it is not necessary you can use the normal relational database storage
for you users.</p>
</li>
<li><p class="first">Finally configure your service to point to the CAS endpoint at:</p>
<blockquote>
<div><p>http[s]://your.domain.com/idp/cas/</p>
</div></blockquote>
</li>
<li><p class="first">If needed configure your service to resolve authenticated user with your
LDAP directory (if user attributes are needed for your service)</p>
</li>
</ol>
</div>
</div>
<div class="section" id="pam-authentication">
<h2>PAM authentication<a class="headerlink" href="#pam-authentication" title="Permalink to this headline">¶</a></h2>
<p>This module is copied from <a class="reference external" href="https://bitbucket.org/wnielson/django-pam/">https://bitbucket.org/wnielson/django-pam/</a> by Weston
Nielson and the pam ctype module by Chris Atlee <a class="reference external" href="http://atlee.ca/software/pam/">http://atlee.ca/software/pam/</a>.</p>
<p>Add &#8216;authentic2.vendor.dpam.backends.PAMBackend&#8217; to your
<tt class="docutils literal"><span class="pre">settings.py</span></tt>:</p>
<div class="highlight-python"><pre>AUTHENTICATION_BACKENDS = (
    ...
    'authentic2.vendor.dpam.backends.PAMBackend',
    ...
)</pre>
</div>
<p>Now you can login via the system-login credentials.  If the user is
successfully authenticated but has never logged-in before, a new <tt class="docutils literal"><span class="pre">User</span></tt>
object is created.  By default this new <tt class="docutils literal"><span class="pre">User</span></tt> has both <tt class="docutils literal"><span class="pre">is_staff</span></tt> and
<tt class="docutils literal"><span class="pre">is_superuser</span></tt> set to <tt class="docutils literal"><span class="pre">False</span></tt>.  You can change this behavior by adding
<tt class="docutils literal"><span class="pre">PAM_IS_STAFF=True</span></tt> and <tt class="docutils literal"><span class="pre">PAM_IS_SUPERUSER</span></tt> in your <tt class="docutils literal"><span class="pre">settings.py</span></tt> file.</p>
<p>The default PAM service used is <tt class="docutils literal"><span class="pre">login</span></tt> but you can change it by setting the
<tt class="docutils literal"><span class="pre">PAM_SERVICE</span></tt> variable in your <tt class="docutils literal"><span class="pre">settings.py</span></tt> file.</p>
</div>
<div class="section" id="attribute-management-in-authentic2">
<h2>Attribute Management in Authentic2<a class="headerlink" href="#attribute-management-in-authentic2" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference external" href="attribute_management.html">attribute management</a> page.</p>
</div>
<div class="section" id="roadmap">
<h2>Roadmap<a class="headerlink" href="#roadmap" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>All (or nearly) settings will be configurable from the /admin panels</li>
<li>Login page will remember user choices for authentication and authenticate
the user passively using hidden iframes</li>
<li>After a logout no passive login will be done</li>
<li>CAS IdP will allow to whitelist service URL and proxy granting ticket URLs,
and to refuse request from unkown URLs. It will also allow to use patterns
as URLs.</li>
<li>Extended CAS 2.0, with SAML attribute inside the CAS 2.0 validated ticket.</li>
<li>A virtual LDAP directory based on the OpenLDAP socket backend would remove
the need for a real LDAP directory to pass user attributes to CAS relying
parties.</li>
<li>WS-Trust token service endpoint</li>
<li>Email forwarder, so that relying parties never get the real user email.</li>
<li>Support slo in the CAS logout endpoint</li>
</ul>
</div></blockquote>
<div class="section" id="copyright">
<h3>Copyright<a class="headerlink" href="#copyright" title="Permalink to this headline">¶</a></h3>
<p>Authentic is copyrighted by Entr&#8217;ouvert and is licensed through the GNU General
Public Licence, version 2 or later. A copy of the whole license text is
available in the COPYING file.</p>
<p>The OpenID IdP originates in the project django_openid_provider by Roman
Barczy¿ski, which is under the Apache 2.0 licence. This imply that you must
distribute authentic2 under the AGPL3 licence when distributing this part of the
project which is the only AGPL licence version compatible with the Apache 2.0
licence.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Authentic2 - Versatile Identity Server</a><ul>
<li><a class="reference internal" href="#features">Features</a></li>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li><a class="reference internal" href="#quick-start">Quick Start</a></li>
<li><a class="reference internal" href="#specifying-a-different-database">Specifying a different database</a></li>
<li><a class="reference internal" href="#how-to-upgrade-to-a-new-version-of-authentic">How to upgrade to a new version of authentic ?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-authentic-with-an-ldap-directory">Using Authentic with an LDAP directory</a><ul>
<li><a class="reference internal" href="#how-to-authenticate-users-against-an-ldap-server-with-anonymous-binding">How to authenticate users against an LDAP server with anonymous binding ?</a></li>
<li><a class="reference internal" href="#how-to-allow-members-of-an-ldap-group-to-manage-authentic">How to allow members of an LDAP group to manage Authentic ?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#saml-2-0">SAML 2.0</a><ul>
<li><a class="reference internal" href="#how-to-i-authenticate-against-authentic2-with-a-samlv2-service-provider">How to I authenticate against Authentic2 with a SAMLv2 service provider ?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cas">CAS</a><ul>
<li><a class="reference internal" href="#how-to-use-authentic2-as-a-cas-1-0-or-cas-2-0-identity-provider">How to use Authentic2 as a CAS 1.0 or CAS 2.0 identity provider ?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pam-authentication">PAM authentication</a></li>
<li><a class="reference internal" href="#attribute-management-in-authentic2">Attribute Management in Authentic2</a></li>
<li><a class="reference internal" href="#roadmap">Roadmap</a><ul>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to Authentic2&#8217;s documentation!</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/README.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="index.html" title="Welcome to Authentic2’s documentation!"
             >previous</a> |</li>
        <li><a href="index.html">Authentic2 1.9.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Mikaël Ates.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.
    </div>
  </body>
</html>